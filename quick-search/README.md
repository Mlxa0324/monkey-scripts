# 关于

Quick Search - 快速搜索. 无缝集成 划词搜索 + 快捷键搜索 + 搜索跳转 + 网址导航, 享受丝滑搜索体验.

# 配置

- 搜索引擎配置包含主页url+搜索url
- 自定义快捷键mapping放到配置中

# 功能

## 划词搜索

划词自动弹出常用搜索引擎列表框, 含直达(打开网址)+更多按钮

## 快捷键搜索

快捷键的设置同时考虑了Mac+Windows+Linux系统.

Quick Search选用Alt为控制键, 用于控制相应按键触发前台打开/后台打开, Mac系统对应option键.

- q 快速搜索(网页), w 维基(百科), e 英语(翻译), r 直达(打开网址)
- s 快速搜索(网页), d 直达(打开网址), f 打开/关闭Quick Search主弹窗
- i 光标定位到网页自带的输入框
- c 复制文本, 若鼠标悬浮于链接之上则复制链接地址
- l 锁定前台/后台打开新标签页, 只在当前页面有效(不保存到配置)
- Alt+l 关闭/开启Quick Search所有功能, 只在当前页面有效(不保存到配置)
- Enter 使用默认搜索引擎搜索
- 常用搜索引擎快捷键. b 百度, g 谷歌
- 如果同时按下Alt/Cmd/Ctrl, 上述需要在新标签页打开的会在后台打开
- 上述快捷键默认都是 选中文本 > 当前页面输入框文本 > 主页/快速搜索框
- 直达(打开网址)功能, 如果文本形如 baidu 没有前后缀, 则自动添加 www. 和 .com

## 搜索跳转

f 打开/关闭Quick Search主弹窗, 自动填入当前搜索引擎搜索词, 快捷跳转.

## 网址导航

f 打开/关闭Quick Search主弹窗, 当搜索框中没有文本或者同时按下Shift时, 点击搜索引擎自动打开其主页.

> 默认使用配置的搜索引擎url中的hostname作为其主页的地址, 可通过home参数另行显示指定.

# checklist

> 下面的checklist等开发好之后可以加到上面的用户文档中

- 同时响应大写按键
- 配置中的搜索引擎每个都有enable属性
- 搜索框左边显示默认搜索引擎icon
- 当页面在设置的搜索引擎列表中时, 快速搜索(q/s)在没有选中文本的情况下, 打开当前页面所在的分类中的另一个引擎
- '问号'图标显示帮助信息(为了避免代码与文档不同步, 帮助信息只提供一个按钮, 跳转到文档地址), '设置'图标打开设置框(提供 重置/取消/保存 按钮)
- esc/点击空白处 退出所有打开的浮窗
- 检查快捷键判断, 比如alt+q, 其他控制键不要按下, 以减少与其他插件等的快捷键冲突
- 支持点击多个搜索引擎, 当点击不在div上时再取消显示, 每次都要获取当前选中的文本而不是剪贴板
- 划词自动复制到剪贴板(弄个配置作为开关)
- 双击选中和划词选中两种方式
- 需要在iframe中也可以使用
- 当光标位于input/textarea中或再其上方时, 选中了文本才启用, 否则不启用
- 当前页面的查询词获取要通过url正则来匹配, 不能通过input, 因为input可能不止一个
- 按键i定位input时, 获取与url中查询词相同的input, 若没有则选取第一个有值并且可见的input, ...
- 自适应位置, 当不可见时自动调整位置
- 定位到网页自带输入框 或 打开快速搜索框时, 自动选中文本
- 显示提示: l, alt+l
- 将光标自动移到特定位置
- 检查所有的搜索引擎的home能否打开

# TODO

- 书签
- 浏览历史
- 搜索历史
- 搜索引擎建议
- 综合上述信息, 用户输入时给出最优的建议
- 由于油猴脚本的限制, 上述功能有的难以实现, 或考虑做成chrome插件